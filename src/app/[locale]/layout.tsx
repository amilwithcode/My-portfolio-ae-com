import React, { ReactNode } from "react"
import type { Metadata } from "next";
import { NextIntlClientProvider } from "next-intl";
import { getMessages } from "next-intl/server"
import { ThemeProvider } from "next-themes";
import "@/src/style/globals.css";
import AuthContextProvider from "@/src/context/AuthContext";
import Navbar from "@/src/components/Navbar";
import FooterSec from "@/src/components/FooterSec";
import ChangeTheme from "@/src/ui/ChangeTheme";
import LocaleSwitcher from "@/src/components/LocaleSwitcher";



type Props = {
  children: ReactNode,
  params: { locale: string },
}
export const metadata: Metadata = {
  title: "Amil's portfolio",
  description: "This website generated by create next app",
  icons: {
    icon: `/favicon.ico`,
    apple: `/favicon.ico`,
  }
};

export default async function RootLayout({ params: { locale }, children }: Props) {

  // const t = useTranslations("HomePage");

  const messages = await getMessages();

  return (
    <html lang={locale} suppressHydrationWarning >
      {/* <head>
        <meta charSet="utf-8" />
        <meta name="apple-mobile-web-app-title" content="MyWebSite" />
      </head> */}



      <AuthContextProvider>
        <ThemeProvider attribute="class">
          <NextIntlClientProvider messages={messages}>
            <body>
              <header>
                <ChangeTheme /> <LocaleSwitcher locale={locale} />
                <div className=" w-full text-black dark:bg-black dark:text-white">
                  <Navbar />
                </div>
              </header>
              {children}
              <footer className=" flex  flex-wrap text-black dark:bg-black dark:text-white items-center justify-center">
                <FooterSec />
              </footer>
            </body>
          </NextIntlClientProvider>
        </ThemeProvider>
      </AuthContextProvider>
    </html >
  )
}
